<h1>Ajouter un livre</h1>   

<mat-card>
  <form [formGroup]="addBookForm" (ngSubmit)="onSubmit()" class="example-form">
    <mat-form-field class="example-full-width">        
      <div class="error" *ngIf="error_message != '' ">{{ error_message }}</div>
      <input matInput type="text" formControlName="title" placeholder="Titre de votre livre">
    </mat-form-field>
    
    <mat-form-field class="example-full-width">
      <textarea matInput  type="text" formControlName="resume" placeholder="Résumé de votre livre"></textarea>
    </mat-form-field>
    
    <mat-form-field class="example-full-width">
      <input matInput type="number" formControlName="note" placeholder="note /10">
    </mat-form-field>
    
    <div formArrayName="categories">
        <div  *ngFor="let categorieControl of getCategories().controls; let i = index">
        <mat-form-field>
            <mat-label>categorie</mat-label>
            <select matNativeControl [formControlName]="i" >
            <option *ngFor="let categorie of categories" [value]="categorie.label" >{{categorie.label}}</option>
            </select>
        </mat-form-field>
        </div>
        <button mat-raised-button color="primary" type="button"  (click)="onAddCategory()">Ajouter Catégorie</button>
    </div>
    <br>
    <button [disabled]="addBookForm.invalid" mat-raised-button color="primary" type="submit">Ajouter le livre</button>
    
  </form>
</mat-card>
